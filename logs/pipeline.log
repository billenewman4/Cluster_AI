2025-06-08 09:48:10,744 - __main__ - INFO - üöÄ Starting Meat Inventory Pipeline
2025-06-08 09:48:10,744 - __main__ - INFO - Categories to process: ['Beef Chuck']
2025-06-08 09:48:10,744 - __main__ - INFO - üì• Stage 1: Data Ingestion - Product Query Processing
2025-06-08 09:48:10,747 - __main__ - INFO - Processing product query file: Product_Query_2025_06_06.csv
2025-06-08 09:48:10,753 - __main__ - INFO - Read 1000 records from Product_Query_2025_06_06.csv with columns: ['ProductSK', 'SourceProductKey', 'ProductCode', 'ProductWarehouseCode', 'ProductDescription', 'ProductDescription2', 'ProductCategoryCode', 'ProductCategory', 'ProductMainCategoryCode', 'ProductMainCategory', 'WarehouseCode', 'Warehouse', 'WarehouseShort', 'ProcessCode', 'ProcessCodeDescription', 'AlphaName', 'BrandCode', 'BrandDescription', 'BrandRate', 'UnitOfMeasure_Stk', 'UnitOfMeasure_Alt', 'WeightConversion', 'UnitOfMeasure_Case', 'SourceSystems', 'LatestProductKeyVersion', 'IsCurrentRecordFlag']
2025-06-08 09:48:10,753 - __main__ - INFO - Full dataset contains 60 unique categories: ['Non Product', 'Pork Hams', 'Sausage', 'Poultry Ground', 'Miscellaneous Beef', 'Pork Rib', 'Pork Other', 'Rib', 'Beef Flank', 'Pork Loin', 'Misc. Items', 'Beef Chuck', 'Chicken Misc.', 'Chicken Airline Breast', 'Ground Beef Anmar Production', 'Beef Variety & Misc', 'Beef Other', 'Delete Items', 'Beef Rib', 'Beef Ground', 'Lamb', 'Hot Dogs', 'Beef Round', 'Pork Sausage', 'Beef Loin', 'Goat', 'Wild Game', 'Veal', 'Halal', 'Supplies', 'Pot Sticker', 'Dim Sum', 'Beef,Pork-Sausage,Smok', 'Pork Ham/Leg', 'Rabbit', 'DISCONTINUED ITEMS', 'Pork Butt', 'Chicken Main', 'Pork Variety', 'Ground Beef', 'Poultry Leg', 'Pork Shoulder', 'Pork Belly', 'Veal Strauss', 'Brisket', 'Chicken Variety', 'Plate', 'Game Meat', 'Duck', 'Poultry Breast', 'Poultry Whole', 'Turkey', 'Poultry Drumstick', 'Poultry Thigh', 'Poultry Tender', 'Poultry Wing', 'Poultry Other', 'Misc', 'Chicken Wings', 'Chicken Leg Meat']
2025-06-08 09:48:10,754 - __main__ - INFO - Top 5 categories by count: {'Beef Rib': 87, 'Pork Loin': 85, 'Pork Other': 81, 'Beef Flank': 80, 'Beef Chuck': 68}
2025-06-08 09:48:10,754 - __main__ - INFO - Found 68 records matching requested categories: ['Beef Chuck']
2025-06-08 09:48:10,756 - __main__ - INFO - Test run: Processing 10 products with 5 from requested categories
2025-06-08 09:48:10,756 - data_ingestion.core.product_transformer - INFO - Processing product data: 10 records with columns ['ProductSK', 'SourceProductKey', 'ProductCode', 'ProductWarehouseCode', 'ProductDescription', 'ProductDescription2', 'ProductCategoryCode', 'ProductCategory', 'ProductMainCategoryCode', 'ProductMainCategory', 'WarehouseCode', 'Warehouse', 'WarehouseShort', 'ProcessCode', 'ProcessCodeDescription', 'AlphaName', 'BrandCode', 'BrandDescription', 'BrandRate', 'UnitOfMeasure_Stk', 'UnitOfMeasure_Alt', 'WeightConversion', 'UnitOfMeasure_Case', 'SourceSystems', 'LatestProductKeyVersion', 'IsCurrentRecordFlag']
2025-06-08 09:48:10,756 - data_ingestion.core.product_transformer - INFO - Found description columns: Primary=ProductDescription, Secondary=ProductDescription2
2025-06-08 09:48:10,756 - data_ingestion.core.product_transformer - INFO - Primary description column 'ProductDescription' stats: 10 total rows, 0 null values, 0 empty strings
2025-06-08 09:48:10,757 - data_ingestion.core.product_transformer - INFO - Secondary description column 'ProductDescription2' stats: 10 total rows, 3 null values, 0 empty strings
2025-06-08 09:48:10,758 - data_ingestion.core.product_transformer - INFO - Merged description column 'product_description' stats: 10 total rows, 0 null values, 0 empty strings
2025-06-08 09:48:10,758 - data_ingestion.core.product_transformer - INFO - Sample merge: 'BF CHUCK SCOTCH TENDER NR AME' + '116B-1 USDA NO ROLL' = 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL'
2025-06-08 09:48:10,758 - data_ingestion.core.product_transformer - INFO - Sample processed row after description merge:
2025-06-08 09:48:10,758 - data_ingestion.core.product_transformer - INFO -   - product_description: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL' (length: 49)
2025-06-08 09:48:10,758 - data_ingestion.core.product_transformer - INFO - Mapped ProductCategory to category_description with 3 unique categories
2025-06-08 09:48:10,758 - data_ingestion.core.product_transformer - INFO - Mapped BrandName to brand_name
2025-06-08 09:48:10,759 - data_ingestion.core.product_transformer - INFO - Mapped ProductCode to product_code
2025-06-08 09:48:10,759 - data_ingestion.core.product_transformer - INFO - Verified product_description column with sample: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL'
2025-06-08 09:48:10,759 - data_ingestion.core.product_transformer - INFO - Final validation successful. Processed 10 records with required columns present.
2025-06-08 09:48:10,759 - data_ingestion.core.product_transformer - INFO - Product description column stats: count                                                    10
unique                                                    4
top       BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL
freq                                                      4
Name: product_description, dtype: object
2025-06-08 09:48:10,759 - data_ingestion.core.product_transformer - INFO - Processed 10 product records with transformations
2025-06-08 09:48:10,779 - __main__ - INFO - Saved processed product data with 10 records to data/processed/product_query_processed.parquet
2025-06-08 09:48:10,780 - __main__ - INFO - Also saved as CSV to data/processed/product_query_processed.csv
2025-06-08 09:48:10,781 - __main__ - INFO - ‚úÖ Successfully processed product query data
2025-06-08 09:48:10,781 - __main__ - INFO - ü§ñ Stage 2: LLM Extraction
2025-06-08 09:48:11,032 - src.data_ingestion.utils.reference_data_loader - INFO - Loaded reference data for 11 primal cuts
2025-06-08 09:48:11,032 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Loaded reference data for 11 beef primals
2025-06-08 09:48:11,032 - __main__ - INFO - Loaded DynamicBeefExtractor with 11 supported primal cuts
2025-06-08 09:48:11,032 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Set current primal to: Chuck
2025-06-08 09:48:11,032 - __main__ - INFO - Using unified beef extractor for category: Beef Chuck (Primal: Chuck)
2025-06-08 09:48:11,061 - __main__ - INFO - Loaded 10 records from processed product query data
2025-06-08 09:48:11,062 - __main__ - INFO - Available categories in data: ['Beef Chuck' 'Non Product' 'Pork Hams']
2025-06-08 09:48:11,062 - __main__ - INFO - Category counts: {'Beef Chuck': 5, 'Non Product': 3, 'Pork Hams': 2}
2025-06-08 09:48:11,062 - __main__ - INFO - Processing category: Beef Chuck
2025-06-08 09:48:11,062 - __main__ - INFO - Found 5 records for Beef Chuck
2025-06-08 09:48:11,063 - __main__ - INFO - Test run: Processing only 5 records
2025-06-08 09:48:11,063 - llm_extraction.batch_processor - INFO - Processing 5 records for Beef Chuck
2025-06-08 09:48:11,064 - llm_extraction.batch_processor - INFO - Converted 5 records to list of dicts
2025-06-08 09:48:11,064 - llm_extraction.batch_processor - INFO - First record: {'ProductSK': 252669, 'SourceProductKey': 20, 'ProductCode': '100101', 'ProductWarehouseCode': '100101-1', 'ProductDescription': 'BF CHUCK SCOTCH TENDER NR AME', 'ProductDescription2': '116B-1 USDA NO ROLL', 'ProductCategoryCode': 103, 'ProductCategory': 'Beef Chuck', 'ProductMainCategoryCode': 10, 'ProductMainCategory': 'Beef', 'WarehouseCode': 1, 'Warehouse': 'Fulton Main', 'WarehouseShort': 'Main', 'ProcessCode': 4.0, 'ProcessCodeDescription': 'Other', 'AlphaName': 'BFCHUCKSCO', 'BrandCode': 16.0, 'BrandName': 'AMERICAN', 'BrandRate': 0.0, 'UnitOfMeasure_Stk': 'LB', 'UnitOfMeasure_Alt': 'CS', 'WeightConversion': 1.0, 'UnitOfMeasure_Case': 'CS', 'SourceSystems': 'Anmar', 'LatestProductKeyVersion': 4, 'IsCurrentRecordFlag': 0, 'product_description': 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL', 'category_description': 'Beef Chuck', 'brand_name': 'AMERICAN', 'product_code': '100101'}
2025-06-08 09:48:11,064 - llm_extraction.batch_processor - DEBUG - Cache hit for: BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...
2025-06-08 09:48:11,064 - llm_extraction.batch_processor - DEBUG - Cache hit for: BF CHUCK BI ARM/SEC CH *__ 113A USDA CHOICE...
2025-06-08 09:48:11,064 - llm_extraction.batch_processor - DEBUG - Cache hit for: BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...
2025-06-08 09:48:11,065 - llm_extraction.batch_processor - DEBUG - Cache hit for: BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...
2025-06-08 09:48:11,065 - llm_extraction.batch_processor - DEBUG - Cache hit for: BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...
2025-06-08 09:48:11,068 - llm_extraction.batch_processor - INFO - Batch processing complete. 5 records processed.
2025-06-08 09:48:11,069 - __main__ - INFO - Successfully processed 5 records for Beef Chuck
2025-06-08 09:48:11,069 - __main__ - INFO - üì§ Stage 3: Output Generation
2025-06-08 09:48:11,070 - output_generation.file_writer - INFO - Separated data: 5 clean records, 0 flagged records
2025-06-08 09:48:11,071 - output_generation.file_writer - INFO - Written 5 clean records to outputs/beef_chuck_extracted.csv
2025-06-08 09:48:11,078 - output_generation.file_writer - INFO - Created master Excel file with 5 records at outputs/meat_inventory_master_20250608_094811.xlsx
2025-06-08 09:48:11,083 - __main__ - INFO - Output files created: ['Beef Chuck', 'excel_master']
2025-06-08 09:48:11,083 - __main__ - INFO - ‚è≠Ô∏è Stage 4: Database Upload (Skipped - use --upload-to-firebase to enable)
2025-06-08 09:48:11,084 - __main__ - INFO - ‚úÖ Pipeline Complete!
2025-06-08 09:48:11,084 - __main__ - INFO - üìä Summary:
2025-06-08 09:48:11,084 - __main__ - INFO -    Total records processed: 5
2025-06-08 09:48:11,084 - __main__ - INFO -    Records needing review: 0 (0.0%)
2025-06-08 09:48:11,084 - __main__ - INFO -    Average confidence: 0.95
2025-06-08 09:53:06,695 - __main__ - INFO - üöÄ Starting Meat Inventory Pipeline
2025-06-08 09:53:06,696 - __main__ - INFO - Categories to process: ['Beef Chuck']
2025-06-08 09:53:06,696 - __main__ - INFO - üì• Stage 1: Data Ingestion - Product Query Processing
2025-06-08 09:53:06,699 - __main__ - INFO - Processing product query file: Product_Query_2025_06_06.csv
2025-06-08 09:53:06,705 - __main__ - INFO - Read 1000 records from Product_Query_2025_06_06.csv with columns: ['ProductSK', 'SourceProductKey', 'ProductCode', 'ProductWarehouseCode', 'ProductDescription', 'ProductDescription2', 'ProductCategoryCode', 'ProductCategory', 'ProductMainCategoryCode', 'ProductMainCategory', 'WarehouseCode', 'Warehouse', 'WarehouseShort', 'ProcessCode', 'ProcessCodeDescription', 'AlphaName', 'BrandCode', 'BrandDescription', 'BrandRate', 'UnitOfMeasure_Stk', 'UnitOfMeasure_Alt', 'WeightConversion', 'UnitOfMeasure_Case', 'SourceSystems', 'LatestProductKeyVersion', 'IsCurrentRecordFlag']
2025-06-08 09:53:06,706 - __main__ - INFO - Full dataset contains 60 unique categories: ['Non Product', 'Pork Hams', 'Sausage', 'Poultry Ground', 'Miscellaneous Beef', 'Pork Rib', 'Pork Other', 'Rib', 'Beef Flank', 'Pork Loin', 'Misc. Items', 'Beef Chuck', 'Chicken Misc.', 'Chicken Airline Breast', 'Ground Beef Anmar Production', 'Beef Variety & Misc', 'Beef Other', 'Delete Items', 'Beef Rib', 'Beef Ground', 'Lamb', 'Hot Dogs', 'Beef Round', 'Pork Sausage', 'Beef Loin', 'Goat', 'Wild Game', 'Veal', 'Halal', 'Supplies', 'Pot Sticker', 'Dim Sum', 'Beef,Pork-Sausage,Smok', 'Pork Ham/Leg', 'Rabbit', 'DISCONTINUED ITEMS', 'Pork Butt', 'Chicken Main', 'Pork Variety', 'Ground Beef', 'Poultry Leg', 'Pork Shoulder', 'Pork Belly', 'Veal Strauss', 'Brisket', 'Chicken Variety', 'Plate', 'Game Meat', 'Duck', 'Poultry Breast', 'Poultry Whole', 'Turkey', 'Poultry Drumstick', 'Poultry Thigh', 'Poultry Tender', 'Poultry Wing', 'Poultry Other', 'Misc', 'Chicken Wings', 'Chicken Leg Meat']
2025-06-08 09:53:06,706 - __main__ - INFO - Top 5 categories by count: {'Beef Rib': 87, 'Pork Loin': 85, 'Pork Other': 81, 'Beef Flank': 80, 'Beef Chuck': 68}
2025-06-08 09:53:06,706 - __main__ - INFO - Found 68 records matching requested categories: ['Beef Chuck']
2025-06-08 09:53:06,708 - __main__ - INFO - Test run: Processing 10 products with 5 from requested categories
2025-06-08 09:53:06,708 - data_ingestion.core.product_transformer - INFO - Processing product data: 10 records with columns ['ProductSK', 'SourceProductKey', 'ProductCode', 'ProductWarehouseCode', 'ProductDescription', 'ProductDescription2', 'ProductCategoryCode', 'ProductCategory', 'ProductMainCategoryCode', 'ProductMainCategory', 'WarehouseCode', 'Warehouse', 'WarehouseShort', 'ProcessCode', 'ProcessCodeDescription', 'AlphaName', 'BrandCode', 'BrandDescription', 'BrandRate', 'UnitOfMeasure_Stk', 'UnitOfMeasure_Alt', 'WeightConversion', 'UnitOfMeasure_Case', 'SourceSystems', 'LatestProductKeyVersion', 'IsCurrentRecordFlag']
2025-06-08 09:53:06,708 - data_ingestion.core.product_transformer - INFO - Found description columns: Primary=ProductDescription, Secondary=ProductDescription2
2025-06-08 09:53:06,709 - data_ingestion.core.product_transformer - INFO - Primary description column 'ProductDescription' stats: 10 total rows, 0 null values, 0 empty strings
2025-06-08 09:53:06,709 - data_ingestion.core.product_transformer - INFO - Secondary description column 'ProductDescription2' stats: 10 total rows, 3 null values, 0 empty strings
2025-06-08 09:53:06,710 - data_ingestion.core.product_transformer - INFO - Merged description column 'product_description' stats: 10 total rows, 0 null values, 0 empty strings
2025-06-08 09:53:06,710 - data_ingestion.core.product_transformer - INFO - Sample merge: 'Pork Ham Tavern Superior' + '4/cs' = 'Pork Ham Tavern Superior 4/cs'
2025-06-08 09:53:06,710 - data_ingestion.core.product_transformer - INFO - Sample processed row after description merge:
2025-06-08 09:53:06,710 - data_ingestion.core.product_transformer - INFO -   - product_description: 'Pork Ham Tavern Superior 4/cs' (length: 29)
2025-06-08 09:53:06,711 - data_ingestion.core.product_transformer - INFO - Mapped ProductCategory to category_description with 3 unique categories
2025-06-08 09:53:06,711 - data_ingestion.core.product_transformer - INFO - Mapped BrandName to brand_name
2025-06-08 09:53:06,711 - data_ingestion.core.product_transformer - INFO - Mapped ProductCode to product_code
2025-06-08 09:53:06,711 - data_ingestion.core.product_transformer - INFO - Verified product_description column with sample: 'Pork Ham Tavern Superior 4/cs'
2025-06-08 09:53:06,711 - data_ingestion.core.product_transformer - INFO - Final validation successful. Processed 10 records with required columns present.
2025-06-08 09:53:06,712 - data_ingestion.core.product_transformer - INFO - Product description column stats: count                                                    10
unique                                                    4
top       BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL
freq                                                      4
Name: product_description, dtype: object
2025-06-08 09:53:06,712 - data_ingestion.core.product_transformer - INFO - Processed 10 product records with transformations
2025-06-08 09:53:06,732 - __main__ - INFO - Saved processed product data with 10 records to data/processed/product_query_processed.parquet
2025-06-08 09:53:06,733 - __main__ - INFO - Also saved as CSV to data/processed/product_query_processed.csv
2025-06-08 09:53:06,733 - __main__ - INFO - ‚úÖ Successfully processed product query data
2025-06-08 09:53:06,733 - __main__ - INFO - ü§ñ Stage 2: LLM Extraction
2025-06-08 09:53:06,995 - src.data_ingestion.utils.reference_data_loader - INFO - Loaded reference data for 11 primal cuts
2025-06-08 09:53:06,996 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Loaded reference data for 11 beef primals
2025-06-08 09:53:06,996 - __main__ - INFO - Loaded DynamicBeefExtractor with 11 supported primal cuts
2025-06-08 09:53:06,996 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Set current primal to: Chuck
2025-06-08 09:53:06,996 - __main__ - INFO - Using unified beef extractor for category: Beef Chuck (Primal: Chuck)
2025-06-08 09:53:06,996 - llm_extraction.batch_processor - WARNING - Could not load cache: Expecting value: line 1 column 1 (char 0)
2025-06-08 09:53:07,023 - __main__ - INFO - Loaded 10 records from processed product query data
2025-06-08 09:53:07,023 - __main__ - INFO - Available categories in data: ['Pork Hams' 'Non Product' 'Beef Chuck']
2025-06-08 09:53:07,024 - __main__ - INFO - Category counts: {'Beef Chuck': 5, 'Non Product': 3, 'Pork Hams': 2}
2025-06-08 09:53:07,024 - __main__ - INFO - Processing category: Beef Chuck
2025-06-08 09:53:07,024 - __main__ - INFO - Found 5 records for Beef Chuck
2025-06-08 09:53:07,024 - __main__ - INFO - Test run: Processing only 5 records
2025-06-08 09:53:07,024 - llm_extraction.batch_processor - INFO - Processing 5 records for Beef Chuck
2025-06-08 09:53:07,025 - llm_extraction.batch_processor - INFO - Converted 5 records to list of dicts
2025-06-08 09:53:07,026 - llm_extraction.batch_processor - INFO - First record: {'ProductSK': 452475, 'SourceProductKey': 20, 'ProductCode': '100101', 'ProductWarehouseCode': '100101-1', 'ProductDescription': 'BF CHUCK SCOTCH TENDER NR AME', 'ProductDescription2': '116B-1 USDA NO ROLL', 'ProductCategoryCode': 103, 'ProductCategory': 'Beef Chuck', 'ProductMainCategoryCode': 10, 'ProductMainCategory': 'Beef', 'WarehouseCode': 1, 'Warehouse': 'Fulton Main', 'WarehouseShort': 'Main', 'ProcessCode': 1.0, 'ProcessCodeDescription': 'Box in box out', 'AlphaName': 'BFCHUCKSCO', 'BrandCode': 16.0, 'BrandName': 'AMERICAN', 'BrandRate': 0.0, 'UnitOfMeasure_Stk': 'LB', 'UnitOfMeasure_Alt': 'CS', 'WeightConversion': 1.0, 'UnitOfMeasure_Case': 'CS', 'SourceSystems': 'Fulton', 'LatestProductKeyVersion': 1, 'IsCurrentRecordFlag': 1, 'product_description': 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL', 'category_description': 'Beef Chuck', 'brand_name': 'AMERICAN', 'product_code': '100101'}
2025-06-08 09:53:07,026 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracting data from description: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...'
2025-06-08 09:53:07,026 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Using specialized prompt for Chuck primal cut, extracting: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...'
2025-06-08 09:53:07,154 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-20f0560f-f5e9-490f-be9f-988ff88aab4b', 'json_data': {'messages': [{'role': 'system', 'content': "You are a butchery-domain extraction assistant specialized in beef chuck cuts.\nUse the Meat Buyer's Guide as ground truth for cut names and hierarchy.\n\nExtract structured data from product descriptions with high accuracy.\nFocus on identifying: species, primal, subprimal, grade, size, size unit, and brand.\n\nFor beef chuck, valid subprimals include: Chuck Flap, Chuck Roll, Clod, Clod Shoulder, Clod Hearts, Flat Iron, Teres Major, Chuck Short Rib, Bone-In Chuck, Bone-In Arm, Top Blade, Blade Meat, ScottyTender, Mock Tender\nCommon synonyms and alternative terms for these subprimals include: Arm Chuck, Arm Roast, Bistro Filet, Blade Meat, Bone-In Arm, Bone-In Chuck, Braising Ribs, Butler‚Äôs Steak, Cap & Wedge, Chuck Blade Meat, Chuck Eye Roll, Chuck Flap, Chuck Roast (bone-in), Chuck Roll, Chuck Short Rib, Chuck Tail Flap, Chuck Tender, Clod, Clod Heart (center muscle), Clod Hearts, Clod Roast, Clod Shoulder, Clod Shoulder Roast, Flap Tail, Flat Iron, Mock Tender, Oyster Blade, Petite Tender, Ribs 2-5, Scotch Tender, ScottyTender, Shoulder Tender, Teres Major, Top Blade, Top Blade Roast (whole muscle), Top Blade Steak\n\nReturn valid JSON only."}, {'role': 'user', 'content': 'Extract structured data from this product description:\n\nDescription: "BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL"\n\nReturn a JSON object with exactly these keys:\n- species (Beef, Pork, etc.)\n- primal (e.g. Chuck, Loin) \n- subprimal (e.g. Chuck Flap, Chuck Roll, Clod)\n- grade (one of: No Grade, Prime, Choice, Select, NR, Utility, Wagyu, Angus, Creekstone Angus)\n- size (numeric value only, null if not found)\n- size_uom (oz | lb | # | g | kg, null if not found)\n- brand (free text or null)\n\nIf any value cannot be determined, use null.\n\nExamples:\n\nInput: "Beef Chuck Chuck Flap 15# Choice Certified Angus"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Flap", "grade": "Choice", "size": 15, "size_uom": "#", "brand": "Certified Angus"}\n\nInput: "Chuck Chuck Roll Prime 8oz"  \nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Roll", "grade": "Prime", "size": 8, "size_uom": "oz", "brand": null}\n\nInput: "Beef Chuck Clod Wagyu 12lb"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Clod", "grade": "Wagyu", "size": 12, "size_uom": "lb", "brand": null}'}], 'model': 'gpt-4o-mini', 'max_tokens': 500, 'temperature': 0.0}}
2025-06-08 09:53:07,175 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-06-08 09:53:07,630 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracting data from description: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...'
2025-06-08 09:53:07,631 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracting data from description: 'BF CHUCK BI ARM/SEC CH *__ 113A USDA CHOICE...'
2025-06-08 09:53:07,631 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracting data from description: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...'
2025-06-08 09:53:07,632 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracting data from description: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...'
2025-06-08 09:53:07,632 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Using specialized prompt for Chuck primal cut, extracting: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...'
2025-06-08 09:53:07,632 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Using specialized prompt for Chuck primal cut, extracting: 'BF CHUCK BI ARM/SEC CH *__ 113A USDA CHOICE...'
2025-06-08 09:53:07,633 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Using specialized prompt for Chuck primal cut, extracting: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...'
2025-06-08 09:53:07,633 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Using specialized prompt for Chuck primal cut, extracting: 'BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL...'
2025-06-08 09:53:07,635 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-4e5cb6f8-a246-4566-a360-75819333b444', 'json_data': {'messages': [{'role': 'system', 'content': "You are a butchery-domain extraction assistant specialized in beef chuck cuts.\nUse the Meat Buyer's Guide as ground truth for cut names and hierarchy.\n\nExtract structured data from product descriptions with high accuracy.\nFocus on identifying: species, primal, subprimal, grade, size, size unit, and brand.\n\nFor beef chuck, valid subprimals include: Chuck Flap, Chuck Roll, Clod, Clod Shoulder, Clod Hearts, Flat Iron, Teres Major, Chuck Short Rib, Bone-In Chuck, Bone-In Arm, Top Blade, Blade Meat, ScottyTender, Mock Tender\nCommon synonyms and alternative terms for these subprimals include: Arm Chuck, Arm Roast, Bistro Filet, Blade Meat, Bone-In Arm, Bone-In Chuck, Braising Ribs, Butler‚Äôs Steak, Cap & Wedge, Chuck Blade Meat, Chuck Eye Roll, Chuck Flap, Chuck Roast (bone-in), Chuck Roll, Chuck Short Rib, Chuck Tail Flap, Chuck Tender, Clod, Clod Heart (center muscle), Clod Hearts, Clod Roast, Clod Shoulder, Clod Shoulder Roast, Flap Tail, Flat Iron, Mock Tender, Oyster Blade, Petite Tender, Ribs 2-5, Scotch Tender, ScottyTender, Shoulder Tender, Teres Major, Top Blade, Top Blade Roast (whole muscle), Top Blade Steak\n\nReturn valid JSON only."}, {'role': 'user', 'content': 'Extract structured data from this product description:\n\nDescription: "BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL"\n\nReturn a JSON object with exactly these keys:\n- species (Beef, Pork, etc.)\n- primal (e.g. Chuck, Loin) \n- subprimal (e.g. Chuck Flap, Chuck Roll, Clod)\n- grade (one of: No Grade, Prime, Choice, Select, NR, Utility, Wagyu, Angus, Creekstone Angus)\n- size (numeric value only, null if not found)\n- size_uom (oz | lb | # | g | kg, null if not found)\n- brand (free text or null)\n\nIf any value cannot be determined, use null.\n\nExamples:\n\nInput: "Beef Chuck Chuck Flap 15# Choice Certified Angus"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Flap", "grade": "Choice", "size": 15, "size_uom": "#", "brand": "Certified Angus"}\n\nInput: "Chuck Chuck Roll Prime 8oz"  \nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Roll", "grade": "Prime", "size": 8, "size_uom": "oz", "brand": null}\n\nInput: "Beef Chuck Clod Wagyu 12lb"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Clod", "grade": "Wagyu", "size": 12, "size_uom": "lb", "brand": null}'}], 'model': 'gpt-4o-mini', 'max_tokens': 500, 'temperature': 0.0}}
2025-06-08 09:53:07,636 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-0af2680c-cdca-46ac-9bac-8b266915269f', 'json_data': {'messages': [{'role': 'system', 'content': "You are a butchery-domain extraction assistant specialized in beef chuck cuts.\nUse the Meat Buyer's Guide as ground truth for cut names and hierarchy.\n\nExtract structured data from product descriptions with high accuracy.\nFocus on identifying: species, primal, subprimal, grade, size, size unit, and brand.\n\nFor beef chuck, valid subprimals include: Chuck Flap, Chuck Roll, Clod, Clod Shoulder, Clod Hearts, Flat Iron, Teres Major, Chuck Short Rib, Bone-In Chuck, Bone-In Arm, Top Blade, Blade Meat, ScottyTender, Mock Tender\nCommon synonyms and alternative terms for these subprimals include: Arm Chuck, Arm Roast, Bistro Filet, Blade Meat, Bone-In Arm, Bone-In Chuck, Braising Ribs, Butler‚Äôs Steak, Cap & Wedge, Chuck Blade Meat, Chuck Eye Roll, Chuck Flap, Chuck Roast (bone-in), Chuck Roll, Chuck Short Rib, Chuck Tail Flap, Chuck Tender, Clod, Clod Heart (center muscle), Clod Hearts, Clod Roast, Clod Shoulder, Clod Shoulder Roast, Flap Tail, Flat Iron, Mock Tender, Oyster Blade, Petite Tender, Ribs 2-5, Scotch Tender, ScottyTender, Shoulder Tender, Teres Major, Top Blade, Top Blade Roast (whole muscle), Top Blade Steak\n\nReturn valid JSON only."}, {'role': 'user', 'content': 'Extract structured data from this product description:\n\nDescription: "BF CHUCK BI ARM/SEC CH *__ 113A USDA CHOICE"\n\nReturn a JSON object with exactly these keys:\n- species (Beef, Pork, etc.)\n- primal (e.g. Chuck, Loin) \n- subprimal (e.g. Chuck Flap, Chuck Roll, Clod)\n- grade (one of: No Grade, Prime, Choice, Select, NR, Utility, Wagyu, Angus, Creekstone Angus)\n- size (numeric value only, null if not found)\n- size_uom (oz | lb | # | g | kg, null if not found)\n- brand (free text or null)\n\nIf any value cannot be determined, use null.\n\nExamples:\n\nInput: "Beef Chuck Chuck Flap 15# Choice Certified Angus"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Flap", "grade": "Choice", "size": 15, "size_uom": "#", "brand": "Certified Angus"}\n\nInput: "Chuck Chuck Roll Prime 8oz"  \nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Roll", "grade": "Prime", "size": 8, "size_uom": "oz", "brand": null}\n\nInput: "Beef Chuck Clod Wagyu 12lb"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Clod", "grade": "Wagyu", "size": 12, "size_uom": "lb", "brand": null}'}], 'model': 'gpt-4o-mini', 'max_tokens': 500, 'temperature': 0.0}}
2025-06-08 09:53:07,637 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-1b436799-c786-4da8-a895-b0be61f1ada9', 'json_data': {'messages': [{'role': 'system', 'content': "You are a butchery-domain extraction assistant specialized in beef chuck cuts.\nUse the Meat Buyer's Guide as ground truth for cut names and hierarchy.\n\nExtract structured data from product descriptions with high accuracy.\nFocus on identifying: species, primal, subprimal, grade, size, size unit, and brand.\n\nFor beef chuck, valid subprimals include: Chuck Flap, Chuck Roll, Clod, Clod Shoulder, Clod Hearts, Flat Iron, Teres Major, Chuck Short Rib, Bone-In Chuck, Bone-In Arm, Top Blade, Blade Meat, ScottyTender, Mock Tender\nCommon synonyms and alternative terms for these subprimals include: Arm Chuck, Arm Roast, Bistro Filet, Blade Meat, Bone-In Arm, Bone-In Chuck, Braising Ribs, Butler‚Äôs Steak, Cap & Wedge, Chuck Blade Meat, Chuck Eye Roll, Chuck Flap, Chuck Roast (bone-in), Chuck Roll, Chuck Short Rib, Chuck Tail Flap, Chuck Tender, Clod, Clod Heart (center muscle), Clod Hearts, Clod Roast, Clod Shoulder, Clod Shoulder Roast, Flap Tail, Flat Iron, Mock Tender, Oyster Blade, Petite Tender, Ribs 2-5, Scotch Tender, ScottyTender, Shoulder Tender, Teres Major, Top Blade, Top Blade Roast (whole muscle), Top Blade Steak\n\nReturn valid JSON only."}, {'role': 'user', 'content': 'Extract structured data from this product description:\n\nDescription: "BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL"\n\nReturn a JSON object with exactly these keys:\n- species (Beef, Pork, etc.)\n- primal (e.g. Chuck, Loin) \n- subprimal (e.g. Chuck Flap, Chuck Roll, Clod)\n- grade (one of: No Grade, Prime, Choice, Select, NR, Utility, Wagyu, Angus, Creekstone Angus)\n- size (numeric value only, null if not found)\n- size_uom (oz | lb | # | g | kg, null if not found)\n- brand (free text or null)\n\nIf any value cannot be determined, use null.\n\nExamples:\n\nInput: "Beef Chuck Chuck Flap 15# Choice Certified Angus"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Flap", "grade": "Choice", "size": 15, "size_uom": "#", "brand": "Certified Angus"}\n\nInput: "Chuck Chuck Roll Prime 8oz"  \nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Roll", "grade": "Prime", "size": 8, "size_uom": "oz", "brand": null}\n\nInput: "Beef Chuck Clod Wagyu 12lb"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Clod", "grade": "Wagyu", "size": 12, "size_uom": "lb", "brand": null}'}], 'model': 'gpt-4o-mini', 'max_tokens': 500, 'temperature': 0.0}}
2025-06-08 09:53:07,638 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a49e35c8-f0b9-439e-a9df-26e0ca40a513', 'json_data': {'messages': [{'role': 'system', 'content': "You are a butchery-domain extraction assistant specialized in beef chuck cuts.\nUse the Meat Buyer's Guide as ground truth for cut names and hierarchy.\n\nExtract structured data from product descriptions with high accuracy.\nFocus on identifying: species, primal, subprimal, grade, size, size unit, and brand.\n\nFor beef chuck, valid subprimals include: Chuck Flap, Chuck Roll, Clod, Clod Shoulder, Clod Hearts, Flat Iron, Teres Major, Chuck Short Rib, Bone-In Chuck, Bone-In Arm, Top Blade, Blade Meat, ScottyTender, Mock Tender\nCommon synonyms and alternative terms for these subprimals include: Arm Chuck, Arm Roast, Bistro Filet, Blade Meat, Bone-In Arm, Bone-In Chuck, Braising Ribs, Butler‚Äôs Steak, Cap & Wedge, Chuck Blade Meat, Chuck Eye Roll, Chuck Flap, Chuck Roast (bone-in), Chuck Roll, Chuck Short Rib, Chuck Tail Flap, Chuck Tender, Clod, Clod Heart (center muscle), Clod Hearts, Clod Roast, Clod Shoulder, Clod Shoulder Roast, Flap Tail, Flat Iron, Mock Tender, Oyster Blade, Petite Tender, Ribs 2-5, Scotch Tender, ScottyTender, Shoulder Tender, Teres Major, Top Blade, Top Blade Roast (whole muscle), Top Blade Steak\n\nReturn valid JSON only."}, {'role': 'user', 'content': 'Extract structured data from this product description:\n\nDescription: "BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL"\n\nReturn a JSON object with exactly these keys:\n- species (Beef, Pork, etc.)\n- primal (e.g. Chuck, Loin) \n- subprimal (e.g. Chuck Flap, Chuck Roll, Clod)\n- grade (one of: No Grade, Prime, Choice, Select, NR, Utility, Wagyu, Angus, Creekstone Angus)\n- size (numeric value only, null if not found)\n- size_uom (oz | lb | # | g | kg, null if not found)\n- brand (free text or null)\n\nIf any value cannot be determined, use null.\n\nExamples:\n\nInput: "Beef Chuck Chuck Flap 15# Choice Certified Angus"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Flap", "grade": "Choice", "size": 15, "size_uom": "#", "brand": "Certified Angus"}\n\nInput: "Chuck Chuck Roll Prime 8oz"  \nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Chuck Roll", "grade": "Prime", "size": 8, "size_uom": "oz", "brand": null}\n\nInput: "Beef Chuck Clod Wagyu 12lb"\nOutput: {"species": "Beef", "primal": "Chuck", "subprimal": "Clod", "grade": "Wagyu", "size": 12, "size_uom": "lb", "brand": null}'}], 'model': 'gpt-4o-mini', 'max_tokens': 500, 'temperature': 0.0}}
2025-06-08 09:53:07,640 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-06-08 09:53:07,641 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-06-08 09:53:07,642 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-06-08 09:53:07,643 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-06-08 09:53:09,115 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 09:53:09,117 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Sun, 08 Jun 2025 13:53:08 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-gblyqg98zxrogzddqhkvjahb'), ('openai-processing-ms', '831'), ('openai-version', '2020-10-01'), ('x-envoy-upstream-service-time', '834'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '4000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '3999430'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '8ms'), ('x-request-id', 'req_b68fa26e370a571052cb89ef69264b7e'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=QYpUrwiNRASccWd7kQASLNDtSu3X4JjO0RPI6hr5OVA-1749390788-1.0.1.1-ujyZDx8cFQHuuEBD1PcwPgaHiuDLFxM3h3QVULvVbtGytnM7cJVFwc1Ip6fyRLg7LHS4ZgLVbnjt1sUFdvi1yzruQ8UHgE50.Xljv36lDXs; path=/; expires=Sun, 08-Jun-25 14:23:08 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=.dXbGBYl530wnN47sJBkpboOeEIhh_3Cn2XoveSvrVE-1749390788950-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '94c8dfa6ec068fbb-BOS'), ('content-encoding', 'br'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-06-08 09:53:09,117 - openai._base_client - DEBUG - request_id: req_b68fa26e370a571052cb89ef69264b7e
2025-06-08 09:53:09,126 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO -  





 API call successful, response ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "ScottyTender", "grade": "NR", "size": null, "size_uom": null, "brand": null}
``` 






2025-06-08 09:53:09,126 - src.llm_extraction.extractors.dynamic_beef_extractor - ERROR - Failed to parse API response as JSON: Expecting value: line 1 column 1 (char 0)
2025-06-08 09:53:09,126 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Raw API response: ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "ScottyTender", "grade": "NR", "size": null, "size_uom": null, "brand": null}
```
2025-06-08 09:53:09,127 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Successfully parsed JSON from text response
2025-06-08 09:53:09,127 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracted data: {'species': 'Beef', 'primal': 'Chuck', 'subprimal': 'ScottyTender', 'grade': 'NR', 'size': None, 'size_uom': None, 'brand': None}
2025-06-08 09:53:09,127 - llm_extraction.batch_processor - DEBUG - Processed: BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL... -> ScottyTender
2025-06-08 09:53:09,210 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 09:53:09,211 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Sun, 08 Jun 2025 13:53:09 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-gblyqg98zxrogzddqhkvjahb'), ('openai-processing-ms', '891'), ('openai-version', '2020-10-01'), ('x-envoy-upstream-service-time', '895'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '4000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '3999431'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '8ms'), ('x-request-id', 'req_810c643f498d0dd29f679c9ef598b7bd'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=.WpwCYqrrnq6MDvyEoAJgr1NWHiqVj4IO3QuAdmQ1Hs-1749390789-1.0.1.1-YvvttxHFgLjArulQGKrzlIGzCNqjysDdbGNqti6VXYarGu6EyAqfNYrqynnE6TgSieStxZAjITR9waqu1FVzOYwDQbZ2za.mqMSjYNarOw4; path=/; expires=Sun, 08-Jun-25 14:23:09 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=o5xbHSbd8NxunXb_avS0OeWl3oXMwYVI0LeSjaOu4Nw-1749390789149-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '94c8dfa6dcd74d02-BOS'), ('content-encoding', 'br'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-06-08 09:53:09,212 - openai._base_client - DEBUG - request_id: req_810c643f498d0dd29f679c9ef598b7bd
2025-06-08 09:53:09,212 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO -  





 API call successful, response ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "ScottyTender", "grade": "NR", "size": null, "size_uom": null, "brand": null}
``` 






2025-06-08 09:53:09,212 - src.llm_extraction.extractors.dynamic_beef_extractor - ERROR - Failed to parse API response as JSON: Expecting value: line 1 column 1 (char 0)
2025-06-08 09:53:09,212 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Raw API response: ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "ScottyTender", "grade": "NR", "size": null, "size_uom": null, "brand": null}
```
2025-06-08 09:53:09,212 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Successfully parsed JSON from text response
2025-06-08 09:53:09,213 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracted data: {'species': 'Beef', 'primal': 'Chuck', 'subprimal': 'ScottyTender', 'grade': 'NR', 'size': None, 'size_uom': None, 'brand': None}
2025-06-08 09:53:09,213 - llm_extraction.batch_processor - DEBUG - Processed: BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL... -> ScottyTender
2025-06-08 09:53:09,233 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 09:53:09,234 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Sun, 08 Jun 2025 13:53:09 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-gblyqg98zxrogzddqhkvjahb'), ('openai-processing-ms', '910'), ('openai-version', '2020-10-01'), ('x-envoy-upstream-service-time', '920'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '4000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '3999431'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '8ms'), ('x-request-id', 'req_d8a45a6714ae5b7a34e6f1f7df8793de'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=4TCIk1gyxnUk8bbkKGOzdHzS0QzTyBNOQhA5ytWWEg8-1749390789-1.0.1.1-8HecVaxPxIECcEhPBZNSD9KmFOfMQfAInudYjlwAdp3EzkLR9.JoDC2NJ_C15hY7K6i.qTSz1eDREYHEAgLKRx2TY7oZjscnPK3qsHObjN4; path=/; expires=Sun, 08-Jun-25 14:23:09 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=nHBcKnwbEO0zqdj3XLNTZIoAgA6wxGUXfx_lBlx0rtk-1749390789168-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '94c8dfa6ebd93059-BOS'), ('content-encoding', 'br'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-06-08 09:53:09,234 - openai._base_client - DEBUG - request_id: req_d8a45a6714ae5b7a34e6f1f7df8793de
2025-06-08 09:53:09,235 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO -  





 API call successful, response ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "ScottyTender", "grade": "NR", "size": null, "size_uom": null, "brand": null}
``` 






2025-06-08 09:53:09,235 - src.llm_extraction.extractors.dynamic_beef_extractor - ERROR - Failed to parse API response as JSON: Expecting value: line 1 column 1 (char 0)
2025-06-08 09:53:09,235 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Raw API response: ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "ScottyTender", "grade": "NR", "size": null, "size_uom": null, "brand": null}
```
2025-06-08 09:53:09,235 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Successfully parsed JSON from text response
2025-06-08 09:53:09,235 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracted data: {'species': 'Beef', 'primal': 'Chuck', 'subprimal': 'ScottyTender', 'grade': 'NR', 'size': None, 'size_uom': None, 'brand': None}
2025-06-08 09:53:09,235 - llm_extraction.batch_processor - DEBUG - Processed: BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL... -> ScottyTender
2025-06-08 09:53:09,525 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 09:53:09,527 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Sun, 08 Jun 2025 13:53:09 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-gblyqg98zxrogzddqhkvjahb'), ('openai-processing-ms', '1310'), ('openai-version', '2020-10-01'), ('x-envoy-upstream-service-time', '1319'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '4000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '3999431'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '8ms'), ('x-request-id', 'req_d48d849baf4eef149b3e50ac4177dd0a'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=_y1HlkIB9zREcZ87JajMm5zDHiPk3CY1fPANiAo7rC0-1749390789-1.0.1.1-D64NKkQvtLhcRFVu3CbL4wmTKdeiDoT7xGHK0IinaGSJ6f_gbKjDgejpJcYhJGNd5SjLUa5j43dp2viRd9XxJLhc9ZdOWx3IXZmSGhIprQQ; path=/; expires=Sun, 08-Jun-25 14:23:09 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=75EGF1iQqhhalEVNMe2Qx_jWHKS1vuMxhjlbnQFRHJI-1749390789429-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '94c8dfa5ee4c4cf8-BOS'), ('content-encoding', 'br'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-06-08 09:53:09,527 - openai._base_client - DEBUG - request_id: req_d48d849baf4eef149b3e50ac4177dd0a
2025-06-08 09:53:09,528 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO -  





 API call successful, response ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "ScottyTender", "grade": "NR", "size": null, "size_uom": null, "brand": null}
``` 






2025-06-08 09:53:09,529 - src.llm_extraction.extractors.dynamic_beef_extractor - ERROR - Failed to parse API response as JSON: Expecting value: line 1 column 1 (char 0)
2025-06-08 09:53:09,529 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Raw API response: ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "ScottyTender", "grade": "NR", "size": null, "size_uom": null, "brand": null}
```
2025-06-08 09:53:09,529 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Successfully parsed JSON from text response
2025-06-08 09:53:09,529 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracted data: {'species': 'Beef', 'primal': 'Chuck', 'subprimal': 'ScottyTender', 'grade': 'NR', 'size': None, 'size_uom': None, 'brand': None}
2025-06-08 09:53:09,529 - llm_extraction.batch_processor - DEBUG - Processed: BF CHUCK SCOTCH TENDER NR AME 116B-1 USDA NO ROLL... -> ScottyTender
2025-06-08 09:53:09,898 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 09:53:09,900 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Sun, 08 Jun 2025 13:53:09 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-gblyqg98zxrogzddqhkvjahb'), ('openai-processing-ms', '1674'), ('openai-version', '2020-10-01'), ('x-envoy-upstream-service-time', '1682'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '4000000'), ('x-ratelimit-remaining-requests', '4998'), ('x-ratelimit-remaining-tokens', '3999310'), ('x-ratelimit-reset-requests', '17ms'), ('x-ratelimit-reset-tokens', '10ms'), ('x-request-id', 'req_1ba977d3b89eb8a83b355725f5e51582'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=6Bnmf76yg5_pOUOD1pDcIovHr7WOZtAhrLQrSFhnCgM-1749390789-1.0.1.1-i_lkCbLxhcoPAucJZBE4ywmBWSsu6IQUisHZobme63LXOpTJh.D4EpH4lyJqaSNCxdhmiSDy3.37SnZhpuDGIx6Yx2OCkCdJQ4WNgL4TGCE; path=/; expires=Sun, 08-Jun-25 14:23:09 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=_9vLgLPcB9JRBnlle65lNW0aOXcNaEnfaZ7eHtjkruI-1749390789836-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '94c8dfa6ec084cce-BOS'), ('content-encoding', 'br'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-06-08 09:53:09,900 - openai._base_client - DEBUG - request_id: req_1ba977d3b89eb8a83b355725f5e51582
2025-06-08 09:53:09,901 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO -  





 API call successful, response ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "Bone-In Arm", "grade": "Choice", "size": null, "size_uom": null, "brand": null}
``` 






2025-06-08 09:53:09,901 - src.llm_extraction.extractors.dynamic_beef_extractor - ERROR - Failed to parse API response as JSON: Expecting value: line 1 column 1 (char 0)
2025-06-08 09:53:09,901 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Raw API response: ```json
{"species": "Beef", "primal": "Chuck", "subprimal": "Bone-In Arm", "grade": "Choice", "size": null, "size_uom": null, "brand": null}
```
2025-06-08 09:53:09,901 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Successfully parsed JSON from text response
2025-06-08 09:53:09,901 - src.llm_extraction.extractors.dynamic_beef_extractor - INFO - Extracted data: {'species': 'Beef', 'primal': 'Chuck', 'subprimal': 'Bone-In Arm', 'grade': 'Choice', 'size': None, 'size_uom': None, 'brand': None}
2025-06-08 09:53:09,901 - llm_extraction.batch_processor - DEBUG - Processed: BF CHUCK BI ARM/SEC CH *__ 113A USDA CHOICE... -> Bone-In Arm
2025-06-08 09:53:09,904 - llm_extraction.batch_processor - INFO - Batch processing complete. 5 records processed.
2025-06-08 09:53:09,904 - __main__ - INFO - Successfully processed 5 records for Beef Chuck
2025-06-08 09:53:09,904 - __main__ - INFO - üì§ Stage 3: Output Generation
2025-06-08 09:53:09,907 - output_generation.file_writer - INFO - Separated data: 5 clean records, 0 flagged records
2025-06-08 09:53:09,909 - output_generation.file_writer - INFO - Written 5 clean records to outputs/beef_chuck_extracted.csv
2025-06-08 09:53:09,917 - output_generation.file_writer - INFO - Created master Excel file with 5 records at outputs/meat_inventory_master_20250608_095309.xlsx
2025-06-08 09:53:09,925 - __main__ - INFO - Output files created: ['Beef Chuck', 'excel_master']
2025-06-08 09:53:09,925 - __main__ - INFO - ‚è≠Ô∏è Stage 4: Database Upload (Skipped - use --upload-to-firebase to enable)
2025-06-08 09:53:09,925 - __main__ - INFO - ‚úÖ Pipeline Complete!
2025-06-08 09:53:09,925 - __main__ - INFO - üìä Summary:
2025-06-08 09:53:09,925 - __main__ - INFO -    Total records processed: 5
2025-06-08 09:53:09,925 - __main__ - INFO -    Records needing review: 0 (0.0%)
2025-06-08 09:53:09,925 - __main__ - INFO -    Average confidence: 0.95
